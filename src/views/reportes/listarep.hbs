<body class="with-side-menu">
	{{> navbar }}
	<div class="mobile-menu-left-overlay-"></div>
	{{> nav }}
	<div class="page-content">
		<div class="container-fluid">
			<header class="section-header">
				<div class="tbl">
					<div class="tbl-row">
						<div class="tbl-cell">
							<h3>Listado de reportes</h3>
							<ol class="breadcrumb breadcrumb-simple">
								<li><a href="/home">Inicio</a></li>
								<li class="active">Reportes</li>
							</ol>
						</div>
					</div>
				</div>
			</header>
			<div class="box-typical box-typical-padding">
				<div class="row">
					<form action="/" method="">
				</div>
					<table id="tabla_reporte" class="table table-bordered table-striped table-vcenter js-dataTable-full">
					{{#ifEquals user.Id_Perfil "2"  }}	
						<thead>
							<tr>
								<th>Nombre de Reporte</th>
								<th>Fecha de publicación</th>
								<th>Fecha inicial</th>
								<th>Fecha final</th>
								<th>Descripción</th>
								<th>Permiso</th>
								<th>Ver</th>
								<th>Eliminar</th>
							</tr>
						</thead>
						<tbody>
							{{#each reportes}}
							<tr>
								<td>{{rep_nombre}}</td>
								<td>{{FECHA_CARGA}}</td>
								<td>{{FECHA_INI}}</td>
								<td>{{FECHA_FIN}}</td>
								<td>{{DETALLE}}</td>
								<td>{{PERFIL}}</td>
								<td><center><a href="/vistarepo/{{REPORTE}}" class="btn btn-inline btn-warning btn-sm ladda-button"><i class="fa fa-bar-chart-o"></i></a></center></td>	
								<td class="text-center"><a onclick="confirmar({{REPORTE}})" type="button" id="eliminar" class="btn btn-inline btn-danger btn-sm ladda-button"><i class="fa fa-trash"></i></a></td>
							</tr>
							{{/each}}
						</tbody>
						{{/ifEquals}}
						{{#ifEquals user.Id_Perfil "9"  }}	
						<thead>
							<tr>
								<th>Nombre de Reporte</th>
								<th>Fecha de publicación</th>
								<th>Fecha inicial</th>
								<th>Fecha final</th>
								<th>Descripción</th>
								<th>Permiso</th>
								<th>Ver</th>
								<th>Eliminar</th>
							</tr>
						</thead>
						<tbody>
							{{#each reportes}}
							<tr>
								<td>{{rep_nombre}}</td>
								<td>{{FECHA_CARGA}}</td>
								<td>{{FECHA_INI}}</td>
								<td>{{FECHA_FIN}}</td>
								<td>{{DETALLE}}</td>
								<td>{{PERFIL}}</td>
								<td><center><a href="/vistarepo/{{REPORTE}}" class="btn btn-inline btn-warning btn-sm ladda-button"><i class="fa fa-bar-chart-o"></i></a></center></td>	
								<td class="text-center"><a onclick="confirmar({{REPORTE}})" type="button" id="eliminar" class="btn btn-inline btn-danger btn-sm ladda-button"><i class="fa fa-trash"></i></a></td>
							</tr>
							{{/each}}
						</tbody>
						{{/ifEquals}}
						{{#ifEquals user.Id_Perfil "6"  }}	
						<thead>
							<tr>
								<th>Nombre de Reporte</th>
								<th>Fecha de publicación</th>
								<th>Fecha inicial</th>
								<th>Fecha final</th>
								<th>Descripción</th>
								<th>Permiso</th>
								<th>Ver</th>	
							</tr>
						</thead>
						<tbody>
							{{#each reportes}}
							<tr>
								<td>{{rep_nombre}}</td>
								<td>{{FECHA_CARGA}}</td>
								<td>{{FECHA_INI}}</td>
								<td>{{FECHA_FIN}}</td>
								<td>{{DETALLE}}</td>
								<td>{{PERFIL}}</td>
								<td><center><a href="/vistarepoc/{{REPORTE}}" class="btn btn-inline btn-warning btn-sm ladda-button"><i class="fa fa-bar-chart-o"></i></a></center></td>		
							</tr>
							{{/each}}
						</tbody>
						{{/ifEquals}}
						{{#ifEquals user.Id_Perfil "5"  }}
						<thead>
							<tr>
								<th>Nombre de Reporte</th>
								<th>Fecha de publicación</th>
								<th>Fecha inicial</th>
								<th>Fecha final</th>
								<th>Descripción</th>
								<th>Permiso</th>
								<th>Ver</th>	
							</tr>
						</thead>
						<tbody>
							{{#each reportes}}
							<tr>
								<td>{{rep_nombre}}</td>
								<td>{{FECHA_CARGA}}</td>
								<td>{{FECHA_INI}}</td>
								<td>{{FECHA_FIN}}</td>
								<td>{{DETALLE}}</td>
								<td>{{PERFIL}}</td>
								<td><center><a href="/vistarepob/{{REPORTE}}" class="btn btn-inline btn-warning btn-sm ladda-button"><i class="fa fa-bar-chart-o"></i></a></center></td>		
							</tr>
							{{/each}}
						</tbody>
						{{/ifEquals}}
						{{#ifEquals user.Id_Perfil "10"  }}
						<thead>
							<tr>
								<th>Nombre de Reporte</th>
								<th>Fecha de publicación</th>
								<th>Fecha inicial</th>
								<th>Fecha final</th>
								<th>Descripción</th>
								<th>Permiso</th>
								<th>Ver</th>	
							</tr>
						</thead>
						<tbody>
							{{#each reportes}}
							<tr>
								<td>{{rep_nombre}}</td>
								<td>{{FECHA_CARGA}}</td>
								<td>{{FECHA_INI}}</td>
								<td>{{FECHA_FIN}}</td>
								<td>{{DETALLE}}</td>
								<td>{{PERFIL}}</td>
								<td><center><a href="/vistarepob/{{REPORTE}}" class="btn btn-inline btn-warning btn-sm ladda-button"><i class="fa fa-bar-chart-o"></i></a></center></td>		
							</tr>
							{{/each}}
						</tbody>
						{{/ifEquals}}
						{{#ifEquals user.Id_Perfil "4"  }}	
						<thead>
							<tr>
								<th>Nombre de Reporte</th>
								<th>Fecha de publicación</th>
								<th>Fecha inicial</th>
								<th>Fecha final</th>
								<th>Descripción</th>
								<th>Permiso</th>
								<th>Ver</th>	
							</tr>
						</thead>
						<tbody>
							{{#each reportes}}
							<tr>
								<td>{{rep_nombre}}</td>
								<td>{{FECHA_CARGA}}</td>
								<td>{{FECHA_INI}}</td>
								<td>{{FECHA_FIN}}</td>
								<td>{{DETALLE}}</td>
								<td>{{PERFIL}}</td>
								<td><center><a href="/vistarepoa/{{REPORTE}}" class="btn btn-inline btn-warning btn-sm ladda-button"><i class="fa fa-bar-chart-o"></i></a></center></td>		
							</tr>
							{{/each}}
						</tbody>
						{{/ifEquals}}
						{{#ifEquals user.Id_Perfil "7"  }}	
						<thead>
							<tr>
								<th>Nombre de Reporte</th>
								<th>Fecha de publicación</th>
								<th>Fecha inicial</th>
								<th>Fecha final</th>
								<th>Descripción</th>
								<th>Permiso</th>
								<th>Ver</th>		
							</tr>
						</thead>
						<tbody>
							{{#each reportes}}
							<tr>
								<td>{{rep_nombre}}</td>
								<td>{{FECHA_CARGA}}</td>
								<td>{{FECHA_INI}}</td>
								<td>{{FECHA_FIN}}</td>
								<td>{{DETALLE}}</td>
								<td>{{PERFIL}}</td>
								<td><center><a href="/vistarepod/{{REPORTE}}" class="btn btn-inline btn-warning btn-sm ladda-button"><i class="fa fa-bar-chart-o"></i></a></center></td>		
							</tr>
							{{/each}}
						</tbody>
						{{/ifEquals}}
						{{#ifEquals user.Id_Perfil "8"  }}	
						<thead>
							<tr>
								<th>Nombre de Reporte</th>
								<th>Fecha de publicación</th>
								<th>Fecha inicial</th>
								<th>Fecha final</th>
								<th>Descripción</th>
								<th>Permiso</th>
								<th>Ver</th>		
							</tr>
						</thead>
						<tbody>
							{{#each reportes}}
							<tr>
								<td>{{rep_nombre}}</td>
								<td>{{FECHA_CARGA}}</td>
								<td>{{FECHA_INI}}</td>
								<td>{{FECHA_FIN}}</td>
								<td>{{DETALLE}}</td>
								<td>{{PERFIL}}</td>
								<td><center><a href="/vistarepoe/{{REPORTE}}" class="btn btn-inline btn-warning btn-sm ladda-button"><i class="fa fa-bar-chart-o"></i></a></center></td>		
							</tr>
							{{/each}}
						</tbody>
						{{/ifEquals}}
					</table>
					</form>	
					<br>
					{{#if message }}
						<div class="alert alert-danger" role="alert">
							{{ message }}
						</div>
					{{/if}}				
			</div>
					<style>
						.dataTables_filter {
							float: left;
						}
						.dt-buttons {
							float: right;
						}
					</style>
		</div>	
	</div>
	<script src="/js/lib/jquery/jquery.min.js"></script>
	<script src="/js/lib/tether/tether.min.js"></script>
	<script src="/js/lib/bootstrap/bootstrap.min.js"></script>
	<script src="/js/plugins.js"></script>
	<script src="/js/app.js"></script>
	<script src="/js/lib/datatables-net/datatables.min.js"></script>
	<script src="/js/lib/bootstrap-sweetalert/sweetalert.min.js"></script>
	<script src="/js/lib/summernote/summernote.min.js"></script>
	<script src="/js/lib/fancybox/jquery.fancybox.pack.js"></script>
	<script src="/js/summernote-ES.js"></script>
	<script src="/js/lib/select2/select2.full.min.js"></script>
	<script>
		var table;
		$(document).ready(function () {
			table = $('#tabla_reporte').DataTable({
				'columnDefs': [
					{
						'targets': 0,
						'checkboxes': {
							'selectRow': true
						}
					}
				],
				'order': [[1, 'asc']],
				"dom": 'Bfrtip',
				"searching": true,
				"lengthChange": false,
				"colReorder": true,
				"buttons": [{
						"extend": 'excelHtml5',
						"text": '<i class="fa fa-file-excel-o"></i>',
						"titleAttr": 'Exportar a Excel',
						"className": 'btn btn-rounded btn-success',
				}],
				"bDestroy": true, 	
				"scrollX": true,
				"bInfo": true,
				"iDisplayLength": 20,
				"autoWidth": false,
				"language": {
					"sProcessing": "Procesando...",
					"sLengthMenu": "Mostrar _MENU_ registros",
					"sZeroRecords": "No se encontraron resultados",
					"sEmptyTable": "Ningún dato disponible en esta tabla",
					"sInfo": "Mostrando un total de _TOTAL_ registros",
					"sInfoEmpty": "Mostrando un total de 0 registros",
					"sInfoFiltered": "(filtrado de un total de _MAX_ registros)",
					"sInfoPostFix": "",
					"sSearch": "Buscar:",
					"sUrl": "",
					"sInfoThousands": ".",
					"sLoadingRecords": "Cargando...",
					"oPaginate": {
						"sFirst": "Primero",
						"sLast": "Último",
						"sNext": "Siguiente",
						"sPrevious": "Anterior"
					},
					"oAria": {
						"sSortAscending": ": Activar para ordenar la columna de manera ascendente",
						"sSortDescending": ": Activar para ordenar la columna de manera descendente"
					},
				},
			}).columns.adjust();
    	});
    </script>
	<script>
			function confirmar(Id){
			
			swal({
					title: "¿Esta Seguro?",
					text: " A continuación eliminará el reporte seleccionado",
					type: "error",
					showCancelButton: true,
					confirmButtonClass: "btn-danger",
					confirmButtonText: "Si",
					cancelButtonText: "No",
					closeOnConfirm: false      
				},
				function(isConfirm) {
					if (isConfirm) {
						window.location = "/reporte/delete/"+Id;
					}
				});
			}
	</script>
</body>